class <%= @controller_name.capitalize %>Controller < RestedController
  get "/?" do
    <%= @controller_name.downcase %> = <%= @controller_name.capitalize %>.all
    render <%= @controller_name.downcase %>
    to_xml(<%= @controller_name.downcase %>)
  end

  get "/:id" do
    <%= @controller_name.downcase %> = <%= @controller_name.capitalize %>.find(params[:id])
    render <%= @controller_name.downcase %>  
    to_xml(<%= @controller_name.downcase %>)
  end

  post "/?" do
    <%= @controller_name.downcase %> = <%= @controller_name.capitalize %>.new
    <%= @controller_name.downcase %>.attributes = params[:<%= @controller_name.downcase %>]
    <%= @controller_name.downcase %>.save
    to_xml(<%= @controller_name.downcase %>)
  end

  put "/:id" do
    <%= @controller_name.downcase %> = <%= @controller_name.capitalize %>.get(params[:id])
    <%= @controller_name.downcase %>.update(params[:<%= @controller_name.downcase %>])
    to_xml(<%= @controller_name.downcase %>)
  end

  delete "/:id" do
    <%= @controller_name.downcase %> = <%= @controller_name.capitalize %>.get(params[:id])
    <%= @controller_name.downcase %>.destroy!
    to_xml(<%= @controller_name.downcase %>)
  end
end